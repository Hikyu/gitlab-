# 代码评审

合并请求[^1]（Merge Request）是在 GitLab 上进行代码协作的基础。合并请求，即：请求将一个分支（源分支）合并到另一个分支（目的分支）。

为了叙述方便，我们约定以下几个关键词：

- **公共仓库**：指的是由组长在群组内创建的项目，是各个成员共同协作的项目，比如 git@192.168.1.101/java/jdbc/oscarJDBCV1.0.git；

- **fork仓库**：群组内项目的 fork 版本，位于自己的命名空间下git@192.168.1.101/yukai/oscarJDBCV1.0.git；

- **本地仓库**：位于自己机器上的**fork仓库**克隆版本。

发起 Merge Request，就是请求将代码从**本地仓库创建的临时分支**合并到**公共仓库的开发分支**上。

理论上来说，提交合并请求，只需要两台分支：源分支和目的分支即可。目的分支应该是项目的开发分支或者其他公共分支，而根据源分支的不同，可以将Merge Request的创建分为两种模式：**基于Fork的Merge Request**和**基于分支的Merge Request**。

- 基于Fork的Merge Request

  源分支是公共仓库的fork仓库下创建的分支；

- 基于分支的Merge Request

  源分支是直接在公共仓库下创建的分支。
  
这两种模式本质上并没有什么不同，其最终结果都是将代码合并到目的分支上。根据具体场景，可以酌情选择其中一种模式：

当项目的参与者较多时可以采用基于Fork模式的review。这种方式可以保证公共仓库的干净，不会产生很多临时分支。缺点是整个review过程变得复杂，流程繁琐。

当项目的维护者很少甚至只有一两个人时，建议采用基于分支模式的review。这种方式虽然会产生一定的临时分支，但胜在review流程较为简单。